Version 2: added subscription function